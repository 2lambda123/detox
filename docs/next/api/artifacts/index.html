<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="Detox" href="/Detox/opensearch.xml">
<script src="https://platform.twitter.com/widgets.js" async></script><title data-react-helmet="true">Artifacts | Detox</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wix.github.io/Detox/docs/next/api/artifacts"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Artifacts | Detox"><meta data-react-helmet="true" name="description" content="Artifacts"><meta data-react-helmet="true" property="og:description" content="Artifacts"><link data-react-helmet="true" rel="shortcut icon" href="/Detox/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wix.github.io/Detox/docs/next/api/artifacts"><link data-react-helmet="true" rel="alternate" href="https://wix.github.io/Detox/docs/next/api/artifacts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wix.github.io/Detox/docs/next/api/artifacts" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Detox/assets/css/styles.f5627d5b.css">
<link rel="preload" href="/Detox/assets/js/runtime~main.84a150b6.js" as="script">
<link rel="preload" href="/Detox/assets/js/main.3bea1e88.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="banner_e+xV"><a href="https://stand-with-ukraine.pp.ua" target="_blank" rel="noopener noreferrer" class="link_9Wa8">🇺🇦 This project is created with substantial contributions from our Ukrainian colleagues.<!-- --> <span class="hashtag_YjJi">#StandWithUkraine</span></a></div><div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Detox/"><div class="navbar__logo"><img src="/Detox/img/logo.png" alt="Detox Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/Detox/img/logo.png" alt="Detox Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Detox</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Detox/docs/next/introduction/getting-started">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/Detox/docs/next/introduction/getting-started">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Detox/docs/next/api/artifacts">Next</a></li><li><a class="dropdown__link" href="/Detox/docs/api/artifacts">19.x</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wix/Detox" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">API Reference</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/detox-cli">Detox Command Line Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/configuration">Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/detox-object-api">The `detox` Object</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/device-object-api">The `device` Object</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/test-lifecycle">Test Lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/matchers">Matchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/actions-on-element">Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/expect">Expect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/launch-args">Launch Arguments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/mocking-open-with-url">Mocking Open With URL (Deep Links)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/mocking-user-notifications">Mocking User Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/mocking-user-activity">Mocking User Activity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Detox/docs/next/api/artifacts">Artifacts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/next/api/screenshots">Taking Screenshots</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Detox/docs/next/contributing">Contributing</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Detox<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Detox/docs/api/artifacts">latest version</a></b> (<!-- -->19.x<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Next</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Artifacts</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="artifacts">Artifacts<a aria-hidden="true" class="hash-link" href="#artifacts" title="Direct link to heading">​</a></h2><p>Artifacts are various recordings during tests including, but not limited to, device logs, device screenshots and screen recordings (videos).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enabling-artifacts">Enabling Artifacts<a aria-hidden="true" class="hash-link" href="#enabling-artifacts" title="Direct link to heading">​</a></h3><p>Artifacts are disabled by default. To enable them, specify via <strong>launch arguments</strong> or a <strong>configuration</strong> object what artifacts you want to record.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="launch-arguments">Launch Arguments<a aria-hidden="true" class="hash-link" href="#launch-arguments" title="Direct link to heading">​</a></h4><ul><li>To record <code>.log</code> files, add <code>--record-logs all</code> (or <code>--record-logs failing</code>, if you want to keep logs only for failing tests).</li><li>To record <code>.mp4</code> test run videos, add <code>--record-videos all</code> (or <code>--record-videos failing</code>, if you want to keep video recordings only for failing tests).</li><li>To record <code>.dtxrec</code> (Detox Instruments recordings) for each test, add <code>--record-performance all</code>. To open those recordings, you’ll need <a href="https://github.com/wix/DetoxInstruments" target="_blank" rel="noopener noreferrer">Detox Instruments</a>. <strong>NOTE:</strong> only iOS is supported.</li><li>To capture <code>.uihierarchy</code> snapshots (<strong>iOS only, Xcode 12.0+</strong>) on view action failures, add <code>--capture-view-hierarchy enabled</code>.</li><li>To take <code>.png</code> screenshots before and after each test, add <code>--take-screenshots all</code> (or <code>--take-screenshots failing</code>, if you want to keep only screenshots of failing tests).\
Alternatively, you might leverage the <a href="/Detox/docs/next/api/device-object-api#devicetakescreenshotname">device.takeScreenshot()</a> API for manual control.</li></ul><h5 class="anchor anchorWithStickyNavbar_y2LR" id="artifacts-root-directory">Artifacts root directory<a aria-hidden="true" class="hash-link" href="#artifacts-root-directory" title="Direct link to heading">​</a></h5><ul><li>To change artifacts root directory location (by default it is <code>./artifacts</code>), add <code>--artifacts-location &lt;path&gt;</code>.\
<strong>NOTE:</strong> There is a slightly obscure convention. If you want to create automatically a subdirectory with timestamp and configuration name (to avoid file overwrites upon consequent reruns), specify a path to directory that does not end with a slash. Otherwise, if you want to put artifacts straight to the specified directory (in a case where you make a single run only, e.g. on CI), add a slash (or a backslash) to the end.</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">detox test --artifacts-location /tmp/detox_artifacts  # will also append /android.emu.release.2018-06-14 08:54:11Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">detox test --artifacts-location /tmp/detox_artifacts/ # won’t append anything, hereby treating it as a root</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="configuration-object">Configuration Object<a aria-hidden="true" class="hash-link" href="#configuration-object" title="Direct link to heading">​</a></h4><p>Detox artifacts can be configured in a more advanced way with the <code>artifacts</code> configuration in <code>package.json</code> (or <code>.detoxrc</code>):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;artifacts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;configurations&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;some.device&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;artifacts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>NOTE:</strong> As you can see, there is a global and a local (per-configuration) configuration of the artifacts.
Detox merges those configurations, and the per-device artifacts configuration has a higher priority over the general one.</p><p>The <code>artifacts</code> object has the following properties:</p><table><thead><tr><th>Property</th><th>Example values</th><th>Default value</th><th>Description</th></tr></thead><tbody><tr><td>rootDir</td><td><code>&quot;.artifacts/&quot;</code></td><td><code>./artifacts</code></td><td>A directory, where all the recorded artifacts will be placed in. Please note that there is a trailing slash convention <a href="#artifacts-root-directory">described above</a>.</td></tr><tr><td>pathBuilder</td><td><code>&quot;./e2e/config/pathbuilder.js&quot;</code></td><td><code>undefined</code></td><td>Path to a module that exports a custom <code>PathBuilder</code> <a href="#path-builder">ᵃ</a></td></tr><tr><td>plugins</td><td><code>{ ... }</code></td><td>... see below</td><td>... see below</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_y2LR" id="path-builder">Path builder<a aria-hidden="true" class="hash-link" href="#path-builder" title="Direct link to heading">​</a></h5><p><strong>ᵃ</strong> <code>PathBuilder</code> should be either an <em>object</em> with a method <code>buildPathForTestArtifact</code> or a <em>class</em> — see the corresponding interfaces below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PathBuilder</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">buildPathForTestArtifact</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">artifactPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> testSummary</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">TestSummary</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PathBuilderClass</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">opts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> rootDir</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PathBuilder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As one can see, if a custom implementation of <code>PathBuilder</code> exports a class instead of an object, then the class constructor can also get and save <code>rootDir</code> location:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyPathBuilder</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> rootDir </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_rootDir</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rootDir</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">buildPathForTestArtifact</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">artifactName</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> testSummary</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* ... use this._rootDir ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">MyPathBuilder</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Its main method, <code>buildPathForTestArtifact</code> should return a full path to the custom artifact location, when called with a suggested artifact name (e.g., <code>testDone.png</code>, <code>device.log</code>) and the current <code>TestSummary</code>, where <code>TestSummary</code> is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">TestSummary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Name of the current test, e.g., for:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * describe(&#x27;that screen&#x27;, () =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *   it(&#x27;should have a menu&#x27;, () =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * The expected string would be: &quot;should have a menu&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Full name of the current test, usually preceded by a suite name, e.g.:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * describe(&#x27;that screen&#x27;, () =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *   it(&#x27;should have a menu&#x27;, () =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * The expected string would be: &quot;that screen should have a menu&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fullName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Status of the current test. Free-form strings are not allowed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;running&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;passed&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;failed&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Clarifies the reason for why the test has failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Expected to coincide only with status: &#x27;failed&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timedOut</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * If the test runner is capable of retrying failed tests, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * this property indicates for which time this test is running.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * When the property is undefined, its value is considered to be 1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    invocations</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more technical details, search for <code>ArtifactPathBuilder.js</code> in Detox source code.</p><p>The further subsections describe the <code>plugins</code> object structure.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="screenshot-plugin">Screenshot Plugin<a aria-hidden="true" class="hash-link" href="#screenshot-plugin" title="Direct link to heading">​</a></h5><p>Below is a default screenshot plugin object configuration, which is loaded implicitly and corresponds to the <code>manual</code> preset:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;plugins&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;screenshot&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;enabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;shouldTakeAutomaticSnapshots&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;keepOnlyFailedTestsArtifacts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;takeWhen&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;testStart&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;testDone&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;appNotReady&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The other string presets override the following properties compared to the default configuration:</p><ul><li><code>none</code> =&gt; <code>{ enabled: false }</code>.</li><li><code>failing</code> =&gt; <code>{ shouldTakeAutomaticSnapshots: true, keepOnlyFailedTestsArtifacts: true }</code>.</li><li><code>all</code> =&gt; <code>{ shouldTakeAutomaticSnapshots: true, keepOnlyFailedTestsArtifacts: false }</code></li></ul><p>The individual property behavior is the following:</p><ul><li>If <code>enabled</code> is <em>false</em>, then the screenshots will never be saved to the artifacts&#x27; folder.</li><li>If <code>shouldTakeAutomaticSnapshots</code> is <em>false</em>, then no one of the events described in <code>takeWhen</code> object is going to trigger a screenshot.</li><li>If <code>keepOnlyFailedTestsArtifacts</code> is <em>true</em>, then only screenshots from a failed test will be saved to the artifacts folder.</li><li>If <code>takeWhen</code> is <em>undefined</em>, it is going to have the default value described above (all props are true).</li><li>If <code>takeWhen</code> is set to be an empty object <code>{}</code>, that is equivalent to:</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;testStart&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;testDone&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;appNotReady&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Hence, for example, if you wish to enable only <code>testDone</code> screenshots and leave taking <code>appNotReady</code> screenshots as-is, you have to pass:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;artifacts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;plugins&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;screenshot&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;takeWhen&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;testDone&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_y2LR" id="video-plugin">Video Plugin<a aria-hidden="true" class="hash-link" href="#video-plugin" title="Direct link to heading">​</a></h5><p>To be done. See meanwhile the example in <a href="/Detox/docs/next/api/configuration#artifacts-configuration">artifacts configuration section</a>.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="log-plugin">Log Plugin<a aria-hidden="true" class="hash-link" href="#log-plugin" title="Direct link to heading">​</a></h5><p>To be done. See meanwhile the example in <a href="/Detox/docs/next/api/configuration#artifacts-configuration">artifacts configuration section</a>.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="instruments-plugin">Instruments Plugin<a aria-hidden="true" class="hash-link" href="#instruments-plugin" title="Direct link to heading">​</a></h5><p>To be done. See meanwhile the example in <a href="/Detox/docs/next/api/configuration#artifacts-configuration">artifacts configuration section</a>.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="ui-hierarchy-plugin">UI hierarchy Plugin<a aria-hidden="true" class="hash-link" href="#ui-hierarchy-plugin" title="Direct link to heading">​</a></h5><p>To be done. See meanwhile the example in <a href="/Detox/docs/next/api/configuration#artifacts-configuration">artifacts configuration section</a>.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="timeline-plugin">Timeline Plugin<a aria-hidden="true" class="hash-link" href="#timeline-plugin" title="Direct link to heading">​</a></h5><p>When enabled using the <code>--record-timeline all</code> argument to Detox, the time-line of the entire testing session is recorded, based on trace calls made by Detox internally, and explicit calls made in user test-code, combined.
The final outcome is a JSON-like file named <code>detox.trace.json</code>, which, if loaded into a Chrome-browser tab with the <code>chrome://tracing</code> URL, would look something like this:</p><p><img alt="Timeline artifact example" src="/Detox/assets/images/timeline-artifact-330d8f1de5146484a15c9f5c9f4d9709.png"></p><p>This <em>tracing</em> view provides a visual, hierarchical representation of the various processes that took place during the execution of the testing session, over the execution’s <em>time-line</em>. These processes appear as hierarchical <em>sections</em> -- sometimes visually ordered in a parent-child way, depending on their formation time and context.
To name a few predefined events, which are generated by Detox itself:</p><ul><li><strong><code>detoxInit</code>:</strong> Initialization of Detox, prior to running the suites associated with a specific tests file.</li><li><strong><code>awaitBoot</code>:</strong> Waiting for an emulator to complete booting (thus being ready to run tests). Done in the surrounding context of <code>detoxInit</code> (and hence visually appears &quot;below&quot; it), as waiting for emulators&#x27; boot is an inherent part of Detox&#x27; initialization.</li><li><strong><code>appInstall</code></strong>, <strong><code>appUninstall</code></strong>.</li><li><strong>&quot;Sanity&quot;:</strong> Execution of a user test suite called <em>Sanity</em>.</li><li><strong><code>reloadRN</code>:</strong> A dynamic reload of the React-Native. Bound to calls to <code>device.reloadReactNative()</code>, specifically.</li></ul><p>In the above example, the following can be observed:</p><ol><li>There were 2 test workers (the Worker #⁠1, Worker #⁠2 time-lines) executing a total of two test suites.</li><li>There were 2 Android emulators used for running the test session, namely <code>emulator-17800</code> and <code>emulator-12466</code>. They were used by worker 1 and worker 2, respectively.</li><li>It took about a total of 54 seconds to initialize and run all the tests.</li><li>The first worker took longer to initialize (as depicted by the <code>detoxInit</code> section). In particular, that happened because it took longer for the associated emulator too finish bootstrapping (see the child <code>awaitBoot</code> section). That suggests there might be a problem with the test execution environment.</li></ol><h6 class="anchor anchorWithStickyNavbar_y2LR" id="purpose">Purpose<a aria-hidden="true" class="hash-link" href="#purpose" title="Direct link to heading">​</a></h6><p><strong>This artifact can be helpful in looking up ways to optimize the execution of your E2E tests.</strong> It may surface shortcomings in the test environment’s ability to run the test, or provide a means to consider different ways of splitting up your tests over test files so as to better utilize parallelism.</p><p>The artifact can in fact be even better utilized -- to the level of inspecting the inside of your tests, by explicitly calling <code>trace</code> via the <code>detox.traceCall()</code> and <code>detox.trace.startSection()</code>, <code>detox.trace.endSection()</code> <a href="/Detox/docs/next/api/detox-object-api#detoxtracecall">APIs</a> inside your tests.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="artifacts-structure">Artifacts Structure<a aria-hidden="true" class="hash-link" href="#artifacts-structure" title="Direct link to heading">​</a></h3><ol><li><p><strong>Artifacts root folder</strong> is created per detox test run. If, for instance,<code>--artifacts-location /tmp</code> is used with <code>--configuration ios.sim.release</code> configuration on 14th June 2018 at 11:02:11 GMT+02, then the folder <code>/tmp/ios.sim.release.2018-06-14 09:02:11Z</code> is created.</p></li><li><p><strong>Test folder</strong> is created per test inside the root folder. The folder name consists of the test number, and the test’s full name provided to <code>detox.afterEach(testSummary)</code> as explained above and in <a href="/Detox/docs/next/api/detox-object-api">detox object</a> documentation. For instance, for the above example, the following folders will be created inside <code>/tmp/ios.sim.release.2018-06-14 09:02:11Z</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">✗ Assertions should assert an element has (accessibility)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✓ Network Synchronization Sync with short network requests - 100ms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><strong>Artifacts files</strong> are created inside the test folders. The files suffixes stand for the files types (currently there are .err.log and .out.log), and the files prefixes are the launch numbers of the application per test (if the app was executed more than once per test, you will have several artifacts of each type - one per launch). For instance, a test folder may contain the following artifacts files:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">test.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test.dtxrec/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">beforeEach.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">afterEach.png</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example-of-the-structure">Example of the structure<a aria-hidden="true" class="hash-link" href="#example-of-the-structure" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">artifacts/android.emu.release.2018-06-12 06:36:18Z/startup.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">artifacts/android.emu.release.2018-06-12 06:36:18Z/✗ Assertions should assert an element has (accessibility) id/beforeEach.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">artifacts/android.emu.release.2018-06-12 06:36:18Z/✗ Assertions should assert an element has (accessibility) id/test.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">artifacts/android.emu.release.2018-06-12 06:36:18Z/✗ Assertions should assert an element has (accessibility) id/test.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">artifacts/android.emu.release.2018-06-12 06:36:18Z/✗ Assertions should assert an element has (accessibility) id/afterEach.png</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="troubleshooting">Troubleshooting<a aria-hidden="true" class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="screenshots-and-videos-do-not-appear-in-the-artifacts-folder">Screenshots and Videos Do Not Appear in the Artifacts Folder<a aria-hidden="true" class="hash-link" href="#screenshots-and-videos-do-not-appear-in-the-artifacts-folder" title="Direct link to heading">​</a></h4><p>Make sure you have <code>detox.beforeEach(testSummary)</code> and <code>detox.afterEach(testSummary)</code> calls in your <code>./e2e/init.js</code>. Check out the recommendations on how to do that for <a href="https://github.com/wix/Detox/tree/master/examples/demo-react-native/e2e/init.js" target="_blank" rel="noopener noreferrer">mocha</a> and <a href="https://github.com/wix/Detox/tree/master/examples/demo-react-native-jest/e2e/init.js" target="_blank" rel="noopener noreferrer">jest</a> using the out-of-the-box adapters.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="video-recording-issues-on-ci">Video Recording Issues on CI<a aria-hidden="true" class="hash-link" href="#video-recording-issues-on-ci" title="Direct link to heading">​</a></h4><p>For iOS, you might be getting errors on CI similar to this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Error: Error Domain=NSPOSIXErrorDomain Code=22 &quot;Invalid argument&quot; UserInfo={NSLocalizedDescription=Video recording requires hardware Metal capability.}.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Unfortunately, this error is beyond our reach. To fix it, you have to enable hardware acceleration on your build machine, or just disable video recording on CI if it is not possible to turn on the acceleration.</p><p>There might be a similar issue on Android when the screen recording process exits with an error on CI. While the solution might be identical to the one above, also you might try to experiment with other emulator devices and Android OS versions to see if it helps.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="detox-instruments-is-installed-in-a-custom-location">Detox Instruments is Installed in a Custom Location<a aria-hidden="true" class="hash-link" href="#detox-instruments-is-installed-in-a-custom-location" title="Direct link to heading">​</a></h4><p>If you have to use <a href="https://github.com/wix/DetoxInstruments" target="_blank" rel="noopener noreferrer">Detox Instruments</a> installed in a custom location, you can point Detox to it with the <code>DETOX_INSTRUMENTS_PATH</code> environment variable, as shown below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">DETOX_INSTRUMENTS_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/path/to/Detox Instruments.app&quot;</span><span class="token plain"> detox </span><span class="token builtin class-name">test</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p><strong>Note:</strong> If <strong>Detox Instruments</strong> had been <a href="https://github.com/wix/DetoxInstruments/blob/master/Documentation/XcodeIntegrationGuide.md" target="_blank" rel="noopener noreferrer">integrated into your project</a>, then the integrated <a href="https://github.com/wix/DetoxInstruments/tree/master/Profiler" target="_blank" rel="noopener noreferrer">Detox Profiler framework</a> will be used when profiling with Detox.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ctrlc-does-not-clean-up-temporary-files"><code>Ctrl+C</code> Does Not Clean Up Temporary Files<a aria-hidden="true" class="hash-link" href="#ctrlc-does-not-clean-up-temporary-files" title="Direct link to heading">​</a></h4><p>This is a known issue. :man<!-- -->_<!-- -->shrugging:
After you press <code>Ctrl+C</code> and stop the tests, some of temporary files won’t get erased (e.g. <code>/sdcard/83541_0.mp4</code> on Android emulator, or <code>/private/var/folders/lm/thz8hdxs4v3fppjh0fjc2twhfl_3x2/T/f12a4fcb-0d1f-4d98-866c-e7cea4942ade.png</code> on your Mac).
It cannot be solved on behalf of Detox itself, because the problem has to do with how Jest runner terminates its puppet processes.
The issue is on our radar, but the ETA for the fix stays unknown.
If you feel able to contribute the fix to <a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">Jest</a>, you are very welcome.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wix/Detox/edit/master/docs/../docs/APIRef.Artifacts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Detox/docs/next/api/mocking-user-activity"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Mocking User Activity</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Detox/docs/next/api/screenshots"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Taking Screenshots<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#artifacts" class="table-of-contents__link toc-highlight">Artifacts</a><ul><li><a href="#enabling-artifacts" class="table-of-contents__link toc-highlight">Enabling Artifacts</a></li><li><a href="#artifacts-structure" class="table-of-contents__link toc-highlight">Artifacts Structure</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Detox/docs/introduction/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Detox/docs/contributing">Contributing to Detox</a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/detox" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Ask a question on Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/wix/Detox/issues/new/choose" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Create new issue on Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/wix/Detox" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/detoxe2e/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/kENf4NbV" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/Detox/assets/js/runtime~main.84a150b6.js"></script>
<script src="/Detox/assets/js/main.3bea1e88.js"></script>
</body>
</html>