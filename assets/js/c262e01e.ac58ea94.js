"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2232],{5162:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),o=a(6010);const i="tabItem_Ymn6";function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,o.Z)(i,l),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(7462),o=a(7294),i=a(6010),l=a(2389),r=a(7392),s=a(7094),p=a(2466);const u="tabList__CuJ",d="tabItem_LNqP";function m(e){var t;const{lazy:a,block:l,defaultValue:m,values:c,groupId:h,className:k}=e,g=o.Children.map(e.children,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=c??g.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),x=(0,r.l)(b,((e,t)=>e.value===t.value));if(x.length>0)throw new Error(`Docusaurus error: Duplicate values "${x.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===m?m:m??(null==(t=g.find((e=>e.props.default)))?void 0:t.props.value)??g[0].props.value;if(null!==v&&!b.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:f,setTabGroupChoices:y}=(0,s.U)(),[N,w]=(0,o.useState)(v),T=[],{blockElementScrollPositionUntilNextRender:D}=(0,p.o5)();if(null!=h){const e=f[h];null!=e&&e!==N&&b.some((t=>t.value===e))&&w(e)}const C=e=>{const t=e.currentTarget,a=T.indexOf(t),n=b[a].value;n!==N&&(D(t),w(n),null!=h&&y(h,String(n)))},I=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{const t=T.indexOf(e.currentTarget)+1;a=T[t]??T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=T[t]??T[T.length-1];break}}null==(t=a)||t.focus()};return o.createElement("div",{className:(0,i.Z)("tabs-container",u)},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":l},k)},b.map((e=>{let{value:t,label:a,attributes:l}=e;return o.createElement("li",(0,n.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>T.push(e),onKeyDown:I,onFocus:C,onClick:C},l,{className:(0,i.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":N===t})}),a??t)}))),a?(0,o.cloneElement)(g.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):o.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function c(e){const t=(0,l.Z)();return o.createElement(m,(0,n.Z)({key:String(t)},e))}},6334:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>k,contentTitle:()=>c,default:()=>x,frontMatter:()=>m,metadata:()=>h,toc:()=>g});var n=a(7462),o=(a(7294),a(3905)),i=a(814),l=a(5488),r=a(5162);const s={toc:[]};function p(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"Note",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Expo support with Detox is entirely a community driven effort. We have no specific support in Detox for Expo applications (ejected or otherwise).")),(0,o.kt)("p",null,"There are a few resources on the Internet covering how to set up Detox with Expo apps:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/fschoenfeldt/clean-expo-detox-testing"},"https://github.com/fschoenfeldt/clean-expo-detox-testing")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://toshev.medium.com/setting-up-detox-with-a-expo-managed-react-native-project-89342dce4df"},"https://toshev.medium.com/setting-up-detox-with-a-expo-managed-react-native-project-89342dce4df")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://blog.expo.dev/testing-expo-apps-with-detox-and-react-native-testing-library-7fbdbb82ac87"},"https://blog.expo.dev/testing-expo-apps-with-detox-and-react-native-testing-library-7fbdbb82ac87"))),(0,o.kt)("p",null,"Unfortunately, we have no capacity to maintain this direction and hold no responsibility for content and\nquality of the mentioned or another available resources."),(0,o.kt)("p",null,"For support on how to use Detox with Expo, you should contact the Expo team or the Expo community. If you\nare seeing an issue, it is most likely not an issue with Detox itself, but with the Expo runtime or with\nan incorrect Detox setup. Genuine issues with Detox can be submitted to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wix/Detox/issues"},"our issue tracker"),"\nas usual."),(0,o.kt)("p",null,"The tutorial below is useful, but is ",(0,o.kt)("strong",{parentName:"p"},"not enough")," to complete the setup with Expo."))}p.isMDXComponent=!0;const u={toc:[]};function d(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"Note",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"At the moment, Detox does not support non-React Native apps on ",(0,o.kt)("strong",{parentName:"p"},"Android")," due to the blocking issues:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/wix/Detox/issues/2543"},"Restore support for pure-native/hybrid Projects")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/wix/Detox/issues/1220"},"cannot be cast to com.facebook.react.ReactApplication")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/wix/Detox/issues/1093"},"native android app Process crashes")))),(0,o.kt)("p",null,"However, native iOS apps are expected to work fine with Detox, and if that's your case, the tutorial\nbelow will help you in equal measure."))}d.isMDXComponent=!0;const m={},c="Getting Started",h={unversionedId:"introduction/getting-started",id:"introduction/getting-started",title:"Getting Started",description:"Welcome to Detox!",source:"@site/../docs/introduction/getting-started.mdx",sourceDirName:"introduction",slug:"/introduction/getting-started",permalink:"/Detox/docs/next/introduction/getting-started",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/../docs/introduction/getting-started.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",next:{title:"Building with Detox",permalink:"/Detox/docs/next/introduction/introduction/building-with-detox"}},k={},g=[{value:"Setting up the environment",id:"setting-up-the-environment",level:2},{value:"Installing Detox prerequisites",id:"installing-detox-prerequisites",level:2},{value:"1. Command Line Tools (<code>detox-cli</code>)",id:"1-command-line-tools-detox-cli",level:3},{value:"2. MacOS Only <code>applesimutils</code>",id:"2-macos-only-applesimutils",level:3},{value:"Setting up the project",id:"setting-up-the-project",level:2}],b={toc:g};function x(e){let{components:t,...s}=e;return(0,o.kt)("wrapper",(0,n.Z)({},b,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"getting-started"},"Getting Started"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Welcome to Detox!")),(0,o.kt)("p",null,"In this guide, we will walk you through setting Detox up in your project, one step at a time."),(0,o.kt)("p",null,"You will find that some steps are longer than the others: some are just one-paragraph long, while for others we have a dedicated multistep guide worked out. Bear with us - it is all necessary, and once set-up, it is easy to move forward with writing tests very rapidly."),(0,o.kt)("p",null,"Please select type of your mobile application before you start the tutorial:"),(0,o.kt)(l.Z,{groupId:"appType",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"start-rn",label:"React Native",default:!0,mdxType:"TabItem"}),(0,o.kt)(r.Z,{value:"start-expo",label:"Expo",mdxType:"TabItem"},(0,o.kt)(p,{mdxType:"IntroExpo"})),(0,o.kt)(r.Z,{value:"start-other",label:"Other",mdxType:"TabItem"},(0,o.kt)(d,{mdxType:"IntroOther"}))),(0,o.kt)("h2",{id:"setting-up-the-environment"},"Setting up the environment"),(0,o.kt)("p",null,"Your first step would be to complete the\n",(0,o.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/next/environment-setup"},"\ud83d\udcda React Native Environment Setup Guide"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(8354).Z,width:"1116",height:"405"})),(0,o.kt)("p",null,"Open the link above and switch there to ",(0,o.kt)("b",null,"React Native CLI Quickstart")," tab to see the interactive tutorial for ",(0,o.kt)("b",null,"Development OS")," and ",(0,o.kt)("b",null,"Target OS")," of your choice."),(0,o.kt)("p",null,"Follow all the steps ",(0,o.kt)("span",{style:{color:"red"}},"(yes, even if you have a native app!)")," and make sure you can create and run React Native apps on virtual testing devices."),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(8086).Z,width:"600",height:"780"})),(0,o.kt)("h2",{id:"installing-detox-prerequisites"},"Installing Detox prerequisites"),(0,o.kt)("p",null,"To complete the environment setup, you still have 2 steps ahead: installing ",(0,o.kt)("inlineCode",{parentName:"p"},"detox-cli")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"applesimutils"),"."),(0,o.kt)("h3",{id:"1-command-line-tools-detox-cli"},"1. Command Line Tools (",(0,o.kt)("inlineCode",{parentName:"h3"},"detox-cli"),")"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"detox-cli")," is merely a script that passes commands through to\na local Detox executable located at ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules/.bin/detox"),",\nmaking it easier to operate Detox from the command line, e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"detox test -c ios.sim.debug"),"."),(0,o.kt)("p",null,"It should be installed globally, enabling usage of the command line tools outside your npm scripts:"),(0,o.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install detox-cli --global\n"))),(0,o.kt)(r.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn global add detox-cli\n")))),(0,o.kt)("p",null,"On the other hand, if you are fine with running Detox commands with ",(0,o.kt)("inlineCode",{parentName:"p"},"npx detox ..."),", you may skip installing ",(0,o.kt)("inlineCode",{parentName:"p"},"detox-cli"),"."),(0,o.kt)("h3",{id:"2-macos-only-applesimutils"},"2. ","[MacOS Only]"," ",(0,o.kt)("inlineCode",{parentName:"h3"},"applesimutils")),(0,o.kt)("p",null,"This tool is ",(0,o.kt)("strong",{parentName:"p"},"required")," by Detox to work with iOS simulators. The recommended way to install\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wix/AppleSimulatorUtils"},(0,o.kt)("inlineCode",{parentName:"a"},"applesimutils"))," is via ",(0,o.kt)("a",{parentName:"p",href:"https://brew.sh"},"Homebrew"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"brew tap wix/brew\nbrew install applesimutils\n")),(0,o.kt)("admonition",{title:"Note",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Make sure to periodically update your version of ",(0,o.kt)("inlineCode",{parentName:"p"},"applesimutils")," to the latest version.")),(0,o.kt)("h2",{id:"setting-up-the-project"},"Setting up the project"),(0,o.kt)(l.Z,{groupId:"appType",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"start-rn",label:"React Native",default:!0,mdxType:"TabItem"},"Go to your project's root folder (where ",(0,o.kt)("code",null,"package.json")," is found) and run:"),(0,o.kt)(r.Z,{value:"start-other",label:"Native iOS",mdxType:"TabItem"},(0,o.kt)("p",null,"Create a ",(0,o.kt)("code",null,"package.json")," in your project's root by running this command:"),(0,o.kt)(i.Z,{language:"bash",mdxType:"CodeBlock"},"npm init -y"),(0,o.kt)("p",null,"And remember to add the ",(0,o.kt)("code",null,"node_modules")," folder to your ",(0,o.kt)("code",null,".gitignore")," file."),(0,o.kt)("p",null,"Now you are ready to install the Detox itself. Run:"))),(0,o.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install detox --save-dev\n"))),(0,o.kt)(r.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add detox --dev\n")))),(0,o.kt)("p",null,"The next step would be to ",(0,o.kt)("strong",{parentName:"p"},"install a test runner"),". Out of the box, Detox offers you first-class integration\nwith ",(0,o.kt)("a",{parentName:"p",href:"https://jestjs.io"},"Jest"),", and that is our official recommendation:"),(0,o.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'npm install "jest@>=27.2.5" --save-dev\n'))),(0,o.kt)(r.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'yarn add "jest@>=27.2.5" --dev\n')))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"The command above will install the ",(0,o.kt)("strong",{parentName:"p"},"latest Jest version")," regardless of the constraint, but ",(0,o.kt)("inlineCode",{parentName:"p"},"@>=27.2.5")," is\nrecommended in the first place to prevent you from getting an incompatible Jest version unknowingly, under influence\nof the existing lock files. Reportedly, ",(0,o.kt)("inlineCode",{parentName:"p"},"package-lock.json")," could restrict ",(0,o.kt)("inlineCode",{parentName:"p"},"npm install jest")," to installing\nan older, unsupported version ",(0,o.kt)("inlineCode",{parentName:"p"},"26.x"),".")),(0,o.kt)("p",null,"Now, when all the dependencies are installed, initialize Detox in your project:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"detox init\n")),(0,o.kt)("p",null,"Normally you should see an output like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-plain",metastring:"text",text:!0},"Created a file at path: .detoxrc.js\nCreated a file at path: e2e/jest.config.js\nCreated a file at path: e2e/starter.test.js\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you see a message like ",(0,o.kt)("inlineCode",{parentName:"p"},"command not found: detox"),", make sure you have ",(0,o.kt)("a",{parentName:"p",href:"#1-command-line-tools-detox-cli"},"installed Detox command line tools"),".")),(0,o.kt)("p",null,"Now, when your environment and a boilerplate with configuration are ready, let's move to the next section,\n",(0,o.kt)("a",{parentName:"p",href:"/Detox/docs/next/introduction/introduction/building-with-detox"},"Building for Detox"),"."))}x.isMDXComponent=!0},8086:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/rn-env-done-7e6ae38e1abc1558b2c280191a7425a8.png"},8354:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/rn-env-ff2580ce1cf001d1cad9dd3a507b97ab.png"}}]);