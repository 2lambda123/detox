"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6587],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,f=m["".concat(s,".").concat(u)]||m[u]||d[u]||r;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1725:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={},o="Logger",l={unversionedId:"api/logger",id:"api/logger",title:"Logger",description:"TODO: rewrite this document",source:"@site/../docs/api/logger.mdx",sourceDirName:"api",slug:"/api/logger",permalink:"/Detox/docs/next/api/logger",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/../docs/api/logger.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Expect",permalink:"/Detox/docs/next/api/expect"},next:{title:"Internals",permalink:"/Detox/docs/next/api/internals"}},s={},p=[{value:"Methods",id:"methods",level:2},{value:"Timeline Plugin",id:"timeline-plugin",level:3},{value:"Purpose",id:"purpose",level:3}],c={toc:p};function d(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"logger"},"Logger"),(0,i.kt)("p",null,"TODO: rewrite this document"),(0,i.kt)("h2",{id:"methods"},"Methods"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#detoxtracecall"},(0,i.kt)("inlineCode",{parentName:"a"},"detox.traceCall()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#detoxtracestartsection-detoxtraceendsection"},(0,i.kt)("inlineCode",{parentName:"a"},"detox.trace.startSection(), detox.trace.endSection()")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"it('Verify sanity things', async () => {\n  try {\n    detox.trace.startSection('Turn off notifications');\n    await element(by.id('gotoNotifications')).tap();\n    await element(by.id('notificationsToggle')).tap();\n    await device.pressBack();\n  } finally {\n    detox.trace.endSection('Turn off notifications');\n  }\n});\n")),(0,i.kt)("p",null,"Effectively, ",(0,i.kt)("inlineCode",{parentName:"p"},"start")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"end")," can even be called in two complete different places - such as a ",(0,i.kt)("inlineCode",{parentName:"p"},"before")," and an ",(0,i.kt)("inlineCode",{parentName:"p"},"after"),". But that is discouraged. In fact, ",(0,i.kt)("strong",{parentName:"p"},"usage of ",(0,i.kt)("inlineCode",{parentName:"strong"},"detox.traceCall()")," is the recommended way of tracing things, altogether.")),(0,i.kt)("h3",{id:"timeline-plugin"},"Timeline Plugin"),(0,i.kt)("p",null,"When enabled using the ",(0,i.kt)("inlineCode",{parentName:"p"},"--record-timeline all")," argument to Detox, the time-line of the entire testing session is recorded, based on trace calls made by Detox internally, and explicit calls made in user test-code, combined.\nThe final outcome is a JSON-like file named ",(0,i.kt)("inlineCode",{parentName:"p"},"detox.trace.json"),", which, if loaded into a Chrome-browser tab with the ",(0,i.kt)("inlineCode",{parentName:"p"},"chrome://tracing")," URL, would look something like this:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Timeline artifact example",src:n(6806).Z,width:"1760",height:"523"})),(0,i.kt)("p",null,"This ",(0,i.kt)("em",{parentName:"p"},"tracing")," view provides a visual, hierarchical representation of the various processes that took place during the execution of the testing session, over the execution\u2019s ",(0,i.kt)("em",{parentName:"p"},"time-line"),". These processes appear as hierarchical ",(0,i.kt)("em",{parentName:"p"},"sections")," \u2013 sometimes visually ordered in a parent-child way, depending on their formation time and context.\nTo name a few predefined events, which are generated by Detox itself:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"detoxInit"),":")," Initialization of Detox, prior to running the suites associated with a specific tests file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"awaitBoot"),":")," Waiting for an emulator to complete booting (thus being ready to run tests). Done in the surrounding context of ",(0,i.kt)("inlineCode",{parentName:"li"},"detoxInit")," (and hence visually appears \"below\" it), as waiting for emulators' boot is an inherent part of Detox' initialization."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"appInstall")),", ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"appUninstall")),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},'"Sanity":')," Execution of a user test suite called ",(0,i.kt)("em",{parentName:"li"},"Sanity"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"reloadRN"),":")," A dynamic reload of the React-Native. Bound to calls to ",(0,i.kt)("inlineCode",{parentName:"li"},"device.reloadReactNative()"),", specifically.")),(0,i.kt)("p",null,"In the above example, the following can be observed:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"There were 2 test workers (the Worker #\u20601, Worker #\u20602 time-lines) executing a total of two test suites."),(0,i.kt)("li",{parentName:"ol"},"There were 2 Android emulators used for running the test session, namely ",(0,i.kt)("inlineCode",{parentName:"li"},"emulator-17800")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"emulator-12466"),". They were used by worker 1 and worker 2, respectively."),(0,i.kt)("li",{parentName:"ol"},"It took about a total of 54 seconds to initialize and run all the tests."),(0,i.kt)("li",{parentName:"ol"},"The first worker took longer to initialize (as depicted by the ",(0,i.kt)("inlineCode",{parentName:"li"},"detoxInit")," section). In particular, that happened because it took longer for the associated emulator too finish bootstrapping (see the child ",(0,i.kt)("inlineCode",{parentName:"li"},"awaitBoot")," section). That suggests there might be a problem with the test execution environment.")),(0,i.kt)("h3",{id:"purpose"},"Purpose"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This artifact can be helpful in looking up ways to optimize the execution of your E2E tests.")," It may surface shortcomings in the test environment\u2019s ability to run the test, or provide a means to consider different ways of splitting up your tests over test files so as to better utilize parallelism."),(0,i.kt)("p",null,"The artifact can in fact be even better utilized \u2013 to the level of inspecting the inside of your tests, by explicitly calling ",(0,i.kt)("inlineCode",{parentName:"p"},"trace")," via the ",(0,i.kt)("inlineCode",{parentName:"p"},"detox.traceCall()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"detox.trace.startSection()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"detox.trace.endSection()")," ",(0,i.kt)("a",{parentName:"p",href:"#detoxtracecall"},"APIs")," inside your tests."))}d.isMDXComponent=!0},6806:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/timeline-artifact-330d8f1de5146484a15c9f5c9f4d9709.png"}}]);